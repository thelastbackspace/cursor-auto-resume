(function(){console.log("Cursor Auto Resume: Enhanced version running");let e=!0,t=0,n=null;function o(){const t=document.createElement("div");t.className="anysphere-icon-button bg-[transparent] border-none text-foreground flex w-3 items-center justify-center cursor-auto-resume-btn",t.style.cursor="pointer",t.title=e?"Auto-resume is ON - Click to disable":"Auto-resume is OFF - Click to enable";const n=document.createElement("span");return n.className="codicon codicon-infinity !text-[12px] none",t.appendChild(n),s(t),t.addEventListener("click",c),t}function s(t){if(!t)return;const n=t.querySelector(".codicon-infinity");e?(t.style.opacity="1",t.style.color="#ffffff",n.style.color="#ffffff",t.title="Auto-resume is ON - Click to disable"):(t.style.opacity="0.5",t.style.color="#888",n.style.color="#888",t.title="Auto-resume is OFF - Click to enable")}function i(){const e=document.querySelector(".cursor-auto-resume-btn");e&&e.remove();const t=document.querySelector(".button-container.composer-button-area");if(!t)return console.log("Button container not found, will retry..."),!1;const s=t.querySelector(".codicon-image-two")?.closest(".anysphere-icon-button");return s?(n=o(),t.insertBefore(n,s),console.log("Infinity button injected successfully"),!0):(console.log("Image button not found, will retry..."),!1)}function c(){e=!e,console.log(`Auto-resume ${e?"enabled":"disabled"}`),s(n)}function r(){if(!e)return;const n=Date.now();if(n-t<3e3)return;const o=document.querySelectorAll("body *");for(const e of o){if(!e||!e.textContent)continue;if(e.textContent.includes("stop the agent after 25 tool calls")||e.textContent.includes("Note: we default stop")){const o=e.querySelectorAll("a, span.markdown-link, [role=\"link\"], [data-link]");for(const e of o)if("resume the conversation"===e.textContent.trim())return console.log('Clicking "resume the conversation" link'),e.click(),void(t=n)}}}function l(){const e=new MutationObserver((e=>{let t=!1;e.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&(e.classList?.contains("composer-button-area")||e.querySelector?.(".composer-button-area"))&&(t=!0)}))})),document.querySelector(".cursor-auto-resume-btn")||(t=!0),t&&setTimeout((()=>{i()}),100)}));return e.observe(document.body,{childList:!0,subtree:!0}),e}!function(){if(!i()){const e=setInterval((()=>{i()&&clearInterval(e)}),1e3)}l(),setInterval(r,1e3),r()}()})();